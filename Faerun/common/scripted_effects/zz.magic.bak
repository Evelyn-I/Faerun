z_calc_spell_slots_wizard = { 
	if = { 
		limit = { 
			check_variable = { which = "wizlvl" value = "0"}
		}
		set_variable = { which = "ss_1_m_wiz" value = "1"}
	}
	if = { 
		limit = { 
			check_variable = { which = "wizlvl" value = "5"}
		}
		set_variable = { which = "ss_2_m_wiz" value = "1"}
		set_variable = { which = "ss_1_m_wiz" value = "2"}
	}
	if = { 
		limit = { 
			check_variable = { which = "wizlvl" value = "10"}
		}
		set_variable = { which = "ss_3_m_wiz" value = "1"}
		set_variable = { which = "ss_2_m_wiz" value = "2"}
		set_variable = { which = "ss_1_m_wiz" value = "3"}
	}
	if = { 
		limit = { 
			check_variable = { which = "wizlvl" value = "15"}
		}
		set_variable = { which = "ss_4_m_wiz" value = "1"}
		set_variable = { which = "ss_3_m_wiz" value = "2"}
		set_variable = { which = "ss_2_m_wiz" value = "3"}
		set_variable = { which = "ss_1_m_wiz" value = "4"}
	}
	if = { 
		limit = { 
			check_variable = { which = "wizlvl" value = "20"}
		}
		set_variable = { which = "ss_5_m_wiz" value = "1"}
		set_variable = { which = "ss_4_m_wiz" value = "2"}
		set_variable = { which = "ss_3_m_wiz" value = "3"}
		set_variable = { which = "ss_2_m_wiz" value = "4"}
		set_variable = { which = "ss_1_m_wiz" value = "5"}
	}
	if = { 
		limit = { 
			check_variable = { which = "wizlvl" value = "25"}
		}
		set_variable = { which = "ss_5_m_wiz" value = "2"}
		set_variable = { which = "ss_4_m_wiz" value = "3"}
		set_variable = { which = "ss_3_m_wiz" value = "4"}
		set_variable = { which = "ss_2_m_wiz" value = "5"}
		set_variable = { which = "ss_1_m_wiz" value = "6"}		
	}	
	if = { 
		limit = { 
			check_variable = { which = "wizlvl" value = "30"}
		}
		set_variable = { which = "ss_5_m_wiz" value = "3"}
		set_variable = { which = "ss_4_m_wiz" value = "4"}
		set_variable = { which = "ss_3_m_wiz" value = "5"}
		set_variable = { which = "ss_2_m_wiz" value = "6"}
		set_variable = { which = "ss_1_m_wiz" value = "7"}	
	}
	if = { 
		limit = { 
			check_variable = { which = "wizlvl" value = "35"}
		}
		set_variable = { which = "ss_5_m_wiz" value = "4"}
		set_variable = { which = "ss_4_m_wiz" value = "5"}
		set_variable = { which = "ss_3_m_wiz" value = "6"}
		set_variable = { which = "ss_2_m_wiz" value = "7"}
		set_variable = { which = "ss_1_m_wiz" value = "8"}	
	}
	if = { 
		limit = { 
			check_variable = { which = "wizlvl" value = "40"}
		}
		set_variable = { which = "ss_5_m_wiz" value = "5"}
		set_variable = { which = "ss_4_m_wiz" value = "6"}
		set_variable = { which = "ss_3_m_wiz" value = "7"}
		set_variable = { which = "ss_2_m_wiz" value = "8"}
		set_variable = { which = "ss_1_m_wiz" value = "9"}	
	}
	if = { 
		limit = { 
			check_variable = { which = "wizlvl" value = "45"}
		}
		set_variable = { which = "ss_5_m_wiz" value = "6"}
		set_variable = { which = "ss_4_m_wiz" value = "7"}
		set_variable = { which = "ss_3_m_wiz" value = "8"}
		set_variable = { which = "ss_2_m_wiz" value = "9"}
		set_variable = { which = "ss_1_m_wiz" value = "9"}	
	}
	if = { 
		limit = { 
			check_variable = { which = "wizlvl" value = "50"}
		}
		set_variable = { which = "ss_5_m_wiz" value = "7"}
		set_variable = { which = "ss_4_m_wiz" value = "8"}
		set_variable = { which = "ss_3_m_wiz" value = "9"}
		set_variable = { which = "ss_2_m_wiz" value = "9"}
		set_variable = { which = "ss_1_m_wiz" value = "9"}	
	}
}

z_spell_slots_refresh_wizard = { 
	z_calc_spell_slots_wizard = yes
	if = {
		limit = { 
			not = { 
				check_variable = {which ="ss_1_wiz" which = "ss_1_m_wiz"}
			}
		}
		set_variable = { which = "dnum" value = "1"}
		z_d4 = yes
		change_variable ={ which = "dresult" value = "-1"}
		change_variable = { which = "ss_1_wiz" which = "dresult"}
		if = { 
			limit = { 
				check_variable = {which ="ss_1_wiz" which = "ss_1_m_wiz"}	
			}
			set_variable = { which = "ss_1_wiz" which = "ss_1_m_wiz"}
		}
	}
	if = {
		limit = { 
			not = { 
				check_variable = {which ="ss_2_wiz" which = "ss_2_m_wiz"}
			}
		}
		set_variable = { which = "dnum" value = "1"}
		z_d4 = yes
		change_variable ={ which = "dresult" value = "-1"}
		change_variable = { which = "ss_2_wiz" which = "dresult"}
		if = { 
			limit = { 
				check_variable = {which ="ss_2_wiz" which = "ss_2_m_wiz"}	
			}
			set_variable = { which = "ss_2_wiz" which = "ss_2_m_wiz"}
		}
	}
	if = {
		limit = { 
			not = { 
				check_variable = {which ="ss_3_wiz" which = "ss_3_m_wiz"}
			}
		}
		set_variable = { which = "dnum" value = "1"}
		z_d4 = yes
		change_variable ={ which = "dresult" value = "-1"}
		change_variable = { which = "ss_3_wiz" which = "dresult"}
		if = { 
			limit = { 
				check_variable = {which ="ss_3_wiz" which = "ss_3_m_wiz"}	
			}
			set_variable = { which = "ss_3_wiz" which = "ss_3_m_wiz"}
		}
	}
	if = {
		limit = { 
			not = { 
				check_variable = {which ="ss_4_wiz" which = "ss_4_m_wiz"}
			}
		}
		set_variable = { which = "dnum" value = "1"}
		z_d4 = yes
		change_variable ={ which = "dresult" value = "-1"}
		change_variable = { which = "ss_4_wiz" which = "dresult"}
		if = { 
			limit = { 
				check_variable = {which ="ss_4_wiz" which = "ss_4_m_wiz"}	
			}
			set_variable = { which = "ss_4_wiz" which = "ss_4_m_wiz"}
		}
	}
	if = {
		limit = { 
			not = { 
				check_variable = {which ="ss_5_wiz" which = "ss_5_m_wiz"}
			}
		}
		set_variable = { which = "dnum" value = "1"}
		z_d4 = yes
		change_variable ={ which = "dresult" value = "-1"}
		change_variable = { which = "ss_5_wiz" which = "dresult"}
		if = { 
			limit = { 
				check_variable = {which ="ss_5_wiz" which = "ss_5_m_wiz"}	
			}
			set_variable = { which = "ss_5_wiz" which = "ss_5_m_wiz"}
		}
	}
}

#calculate Cleric Spell Slots
z_calc_spell_slots_cleric = { 
	if = { 
		limit = { 
			check_variable = { which = "clerlvl" value = "0"}
		}
		set_variable = { which = "ss_1_m_cler" value = "1"}
	}
	if = { 
		limit = { 
			check_variable = { which = "clerlvl" value = "5"}
		}
		set_variable = { which = "ss_2_m_cler" value = "1"}
		set_variable = { which = "ss_1_m_cler" value = "2"}
	}
	if = { 
		limit = { 
			check_variable = { which = "clerlvl" value = "10"}
		}
		set_variable = { which = "ss_3_m_cler" value = "1"}
		set_variable = { which = "ss_2_m_cler" value = "2"}
		set_variable = { which = "ss_1_m_cler" value = "3"}
	}
	if = { 
		limit = { 
			check_variable = { which = "clerlvl" value = "15"}
		}
		set_variable = { which = "ss_4_m_cler" value = "1"}
		set_variable = { which = "ss_3_m_cler" value = "2"}
		set_variable = { which = "ss_2_m_cler" value = "3"}
		set_variable = { which = "ss_1_m_cler" value = "4"}
	}
	if = { 
		limit = { 
			check_variable = { which = "clerlvl" value = "20"}
		}
		set_variable = { which = "ss_5_m_cler" value = "1"}
		set_variable = { which = "ss_4_m_cler" value = "2"}
		set_variable = { which = "ss_3_m_cler" value = "3"}
		set_variable = { which = "ss_2_m_cler" value = "4"}
		set_variable = { which = "ss_1_m_cler" value = "5"}
	}
	if = { 
		limit = { 
			check_variable = { which = "clerlvl" value = "25"}
		}
		set_variable = { which = "ss_5_m_cler" value = "2"}
		set_variable = { which = "ss_4_m_cler" value = "3"}
		set_variable = { which = "ss_3_m_cler" value = "4"}
		set_variable = { which = "ss_2_m_cler" value = "5"}
		set_variable = { which = "ss_1_m_cler" value = "6"}		
	}	
	if = { 
		limit = { 
			check_variable = { which = "clerlvl" value = "30"}
		}
		set_variable = { which = "ss_5_m_cler" value = "3"}
		set_variable = { which = "ss_4_m_cler" value = "4"}
		set_variable = { which = "ss_3_m_cler" value = "5"}
		set_variable = { which = "ss_2_m_cler" value = "6"}
		set_variable = { which = "ss_1_m_cler" value = "7"}	
	}
	if = { 
		limit = { 
			check_variable = { which = "clerlvl" value = "35"}
		}
		set_variable = { which = "ss_5_m_cler" value = "4"}
		set_variable = { which = "ss_4_m_cler" value = "5"}
		set_variable = { which = "ss_3_m_cler" value = "6"}
		set_variable = { which = "ss_2_m_cler" value = "7"}
		set_variable = { which = "ss_1_m_cler" value = "8"}	
	}
	if = { 
		limit = { 
			check_variable = { which = "clerlvl" value = "40"}
		}
		set_variable = { which = "ss_5_m_cler" value = "5"}
		set_variable = { which = "ss_4_m_cler" value = "6"}
		set_variable = { which = "ss_3_m_cler" value = "7"}
		set_variable = { which = "ss_2_m_cler" value = "8"}
		set_variable = { which = "ss_1_m_cler" value = "9"}	
	}
	if = { 
		limit = { 
			check_variable = { which = "clerlvl" value = "45"}
		}
		set_variable = { which = "ss_5_m_cler" value = "6"}
		set_variable = { which = "ss_4_m_cler" value = "7"}
		set_variable = { which = "ss_3_m_cler" value = "8"}
		set_variable = { which = "ss_2_m_cler" value = "9"}
		set_variable = { which = "ss_1_m_cler" value = "9"}	
	}
	if = { 
		limit = { 
			check_variable = { which = "clerlvl" value = "50"}
		}
		set_variable = { which = "ss_5_m_cler" value = "7"}
		set_variable = { which = "ss_4_m_cler" value = "8"}
		set_variable = { which = "ss_3_m_cler" value = "9"}
		set_variable = { which = "ss_2_m_cler" value = "9"}
		set_variable = { which = "ss_1_m_cler" value = "9"}	
	}
}
#refresh Cleric Spell Slots
z_spell_slots_refresh_cleric = { 
	z_calc_spell_slots_cleric = yes
	if = {
		limit = { 
			not = { 
				check_variable = {which ="ss_1_cler" which = "ss_1_m_cler"}
			}
		}
		set_variable = { which = "dnum" value = "1"}
		z_d4 = yes
		change_variable ={ which = "dresult" value = "-1"}
		change_variable = { which = "ss_1_cler" which = "dresult"}
		if = { 
			limit = { 
				check_variable = {which ="ss_1_cler" which = "ss_1_m_cler"}	
			}
			set_variable = { which = "ss_1_cler" which = "ss_1_m_cler"}
		}
	}
	if = {
		limit = { 
			not = { 
				check_variable = {which ="ss_2_cler" which = "ss_2_m_cler"}
			}
		}
		set_variable = { which = "dnum" value = "1"}
		z_d4 = yes
		change_variable ={ which = "dresult" value = "-1"}
		change_variable = { which = "ss_2_cler" which = "dresult"}
		if = { 
			limit = { 
				check_variable = {which ="ss_2_cler" which = "ss_2_m_cler"}	
			}
			set_variable = { which = "ss_2_cler" which = "ss_2_m_cler"}
		}
	}
	if = {
		limit = { 
			not = { 
				check_variable = {which ="ss_3_cler" which = "ss_3_m_cler"}
			}
		}
		set_variable = { which = "dnum" value = "1"}
		z_d4 = yes
		change_variable ={ which = "dresult" value = "-1"}
		change_variable = { which = "ss_3_cler" which = "dresult"}
		if = { 
			limit = { 
				check_variable = {which ="ss_3_cler" which = "ss_3_m_cler"}	
			}
			set_variable = { which = "ss_3_cler" which = "ss_3_m_cler"}
		}
	}
	if = {
		limit = { 
			not = { 
				check_variable = {which ="ss_4_cler" which = "ss_4_m_cler"}
			}
		}
		set_variable = { which = "dnum" value = "1"}
		z_d4 = yes
		change_variable ={ which = "dresult" value = "-1"}
		change_variable = { which = "ss_4_cler" which = "dresult"}
		if = { 
			limit = { 
				check_variable = {which ="ss_4_cler" which = "ss_4_m_cler"}	
			}
			set_variable = { which = "ss_4_cler" which = "ss_4_m_cler"}
		}
	}
	if = {
		limit = { 
			not = { 
				check_variable = {which ="ss_5_cler" which = "ss_5_m_cler"}
			}
		}
		set_variable = { which = "dnum" value = "1"}
		z_d4 = yes
		change_variable ={ which = "dresult" value = "-1"}
		change_variable = { which = "ss_5_cler" which = "dresult"}
		if = { 
			limit = { 
				check_variable = {which ="ss_5_cler" which = "ss_5_m_cler"}	
			}
			set_variable = { which = "ss_5_cler" which = "ss_5_m_cler"}
		}
	}
}


#calc Druid Spell Slots
z_calc_spell_slots_druid = { 
	if = { 
		limit = { 
			check_variable = { which = "druilvl" value = "0"}
		}
		set_variable = { which = "ss_1_m_drui" value = "1"}
	}
	if = { 
		limit = { 
			check_variable = { which = "druilvl" value = "5"}
		}
		set_variable = { which = "ss_2_m_drui" value = "1"}
		set_variable = { which = "ss_1_m_drui" value = "2"}
	}
	if = { 
		limit = { 
			check_variable = { which = "druilvl" value = "10"}
		}
		set_variable = { which = "ss_3_m_drui" value = "1"}
		set_variable = { which = "ss_2_m_drui" value = "2"}
		set_variable = { which = "ss_1_m_drui" value = "3"}
	}
	if = { 
		limit = { 
			check_variable = { which = "druilvl" value = "15"}
		}
		set_variable = { which = "ss_4_m_drui" value = "1"}
		set_variable = { which = "ss_3_m_drui" value = "2"}
		set_variable = { which = "ss_2_m_drui" value = "3"}
		set_variable = { which = "ss_1_m_drui" value = "4"}
	}
	if = { 
		limit = { 
			check_variable = { which = "druilvl" value = "20"}
		}
		set_variable = { which = "ss_5_m_drui" value = "1"}
		set_variable = { which = "ss_4_m_drui" value = "2"}
		set_variable = { which = "ss_3_m_drui" value = "3"}
		set_variable = { which = "ss_2_m_drui" value = "4"}
		set_variable = { which = "ss_1_m_drui" value = "5"}
	}
	if = { 
		limit = { 
			check_variable = { which = "druilvl" value = "25"}
		}
		set_variable = { which = "ss_5_m_drui" value = "2"}
		set_variable = { which = "ss_4_m_drui" value = "3"}
		set_variable = { which = "ss_3_m_drui" value = "4"}
		set_variable = { which = "ss_2_m_drui" value = "5"}
		set_variable = { which = "ss_1_m_drui" value = "6"}		
	}	
	if = { 
		limit = { 
			check_variable = { which = "druilvl" value = "30"}
		}
		set_variable = { which = "ss_5_m_drui" value = "3"}
		set_variable = { which = "ss_4_m_drui" value = "4"}
		set_variable = { which = "ss_3_m_drui" value = "5"}
		set_variable = { which = "ss_2_m_drui" value = "6"}
		set_variable = { which = "ss_1_m_drui" value = "7"}	
	}
	if = { 
		limit = { 
			check_variable = { which = "druilvl" value = "35"}
		}
		set_variable = { which = "ss_5_m_drui" value = "4"}
		set_variable = { which = "ss_4_m_drui" value = "5"}
		set_variable = { which = "ss_3_m_drui" value = "6"}
		set_variable = { which = "ss_2_m_drui" value = "7"}
		set_variable = { which = "ss_1_m_drui" value = "8"}	
	}
	if = { 
		limit = { 
			check_variable = { which = "druilvl" value = "40"}
		}
		set_variable = { which = "ss_5_m_drui" value = "5"}
		set_variable = { which = "ss_4_m_drui" value = "6"}
		set_variable = { which = "ss_3_m_drui" value = "7"}
		set_variable = { which = "ss_2_m_drui" value = "8"}
		set_variable = { which = "ss_1_m_drui" value = "9"}	
	}
	if = { 
		limit = { 
			check_variable = { which = "druilvl" value = "45"}
		}
		set_variable = { which = "ss_5_m_drui" value = "6"}
		set_variable = { which = "ss_4_m_drui" value = "7"}
		set_variable = { which = "ss_3_m_drui" value = "8"}
		set_variable = { which = "ss_2_m_drui" value = "9"}
		set_variable = { which = "ss_1_m_drui" value = "9"}	
	}
	if = { 
		limit = { 
			check_variable = { which = "druilvl" value = "50"}
		}
		set_variable = { which = "ss_5_m_drui" value = "7"}
		set_variable = { which = "ss_4_m_drui" value = "8"}
		set_variable = { which = "ss_3_m_drui" value = "9"}
		set_variable = { which = "ss_2_m_drui" value = "9"}
		set_variable = { which = "ss_1_m_drui" value = "9"}	
	}
}

#refresh druid spell slots

z_spell_slots_refresh_druid = { 
	z_calc_spell_slots_druid = yes
	if = {
		limit = { 
			not = { 
				check_variable = {which ="ss_1_drui" which = "ss_1_m_drui"}
			}
		}
		set_variable = { which = "dnum" value = "1"}
		z_d4 = yes
		change_variable ={ which = "dresult" value = "-1"}
		change_variable = { which = "ss_1_drui" which = "dresult"}
		if = { 
			limit = { 
				check_variable = {which ="ss_1_drui" which = "ss_1_m_drui"}	
			}
			set_variable = { which = "ss_1_drui" which = "ss_1_m_drui"}
		}
	}
	if = {
		limit = { 
			not = { 
				check_variable = {which ="ss_2_drui" which = "ss_2_m_drui"}
			}
		}
		set_variable = { which = "dnum" value = "1"}
		z_d4 = yes
		change_variable ={ which = "dresult" value = "-1"}
		change_variable = { which = "ss_2_drui" which = "dresult"}
		if = { 
			limit = { 
				check_variable = {which ="ss_2_drui" which = "ss_2_m_drui"}	
			}
			set_variable = { which = "ss_2_drui" which = "ss_2_m_drui"}
		}
	}
	if = {
		limit = { 
			not = { 
				check_variable = {which ="ss_3_drui" which = "ss_3_m_drui"}
			}
		}
		set_variable = { which = "dnum" value = "1"}
		z_d4 = yes
		change_variable ={ which = "dresult" value = "-1"}
		change_variable = { which = "ss_3_drui" which = "dresult"}
		if = { 
			limit = { 
				check_variable = {which ="ss_3_drui" which = "ss_3_m_drui"}	
			}
			set_variable = { which = "ss_3_drui" which = "ss_3_m_drui"}
		}
	}
	if = {
		limit = { 
			not = { 
				check_variable = {which ="ss_4_drui" which = "ss_4_m_drui"}
			}
		}
		set_variable = { which = "dnum" value = "1"}
		z_d4 = yes
		change_variable ={ which = "dresult" value = "-1"}
		change_variable = { which = "ss_4_drui" which = "dresult"}
		if = { 
			limit = { 
				check_variable = {which ="ss_4_drui" which = "ss_4_m_drui"}	
			}
			set_variable = { which = "ss_4_drui" which = "ss_4_m_drui"}
		}
	}
	if = {
		limit = { 
			not = { 
				check_variable = {which ="ss_5_drui" which = "ss_5_m_drui"}
			}
		}
		set_variable = { which = "dnum" value = "1"}
		z_d4 = yes
		change_variable ={ which = "dresult" value = "-1"}
		change_variable = { which = "ss_5_drui" which = "dresult"}
		if = { 
			limit = { 
				check_variable = {which ="ss_5_drui" which = "ss_5_m_drui"}	
			}
			set_variable = { which = "ss_5_drui" which = "ss_5_m_drui"}
		}
	}
}
